<!DOCTYPE html>
<html>
<head>
  <title>Tic Tac Toe</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h2 {
      margin-top: 30px;
      color: #333;
    }
    #setup {
      margin-top: 30px;
      background: white;
      padding: 20px 25px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      width: 320px;
    }
    label {
      display: block;
      margin: 15px 0 5px 0;
      font-weight: bold;
      color: #555;
    }
    select, input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 1em;
      box-sizing: border-box;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 10px 0;
      font-size: 1.1em;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #357abd;
    }
    #board {
      margin-top: 30px;
      display: none;
      grid-template-columns: repeat(3, 100px);
      gap: 8px;
      user-select: none;
    }
    .cell {
      width: 100px;
      height: 100px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 3em;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .cell:hover {
      background-color: #e1e7f0;
    }
    .win-cell {
      background: #ffd54f !important;
      color: #d84315 !important;
      font-weight: bold;
      box-shadow: 0 0 15px #ffb300;
    }
    #status {
      margin-top: 25px;
      font-size: 1.3em;
      font-weight: bold;
      color: #333;
      min-height: 28px;
      text-align: center;
    }
    #resetBtn {
      margin-top: 20px;
      background: #e53935;
      width: 130px;
      color: white;
      border-radius: 7px;
      border: none;
      font-size: 1em;
      padding: 10px 0;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    #resetBtn:hover {
      background: #b71c1c;
    }
  </style>
</head>
<body>
  <h2>Tic Tac Toe</h2>
  <div id="setup">
    <label for="mode">Select Game Mode:</label>
    <select id="mode" onchange="togglePlayerOInput()">
      <option value="">--Choose mode--</option>
      <option value="multiplayer">Multiplayer</option>
      <option value="computer">Vs Computer</option>
    </select>
    <label for="playerXName">Player X Name:</label>
    <input type="text" id="playerXName" placeholder="Enter player X name" />
    <div id="playerONameContainer" style="display:none;">
      <label for="playerOName">Player O Name:</label>
      <input type="text" id="playerOName" placeholder="Enter player O name" />
    </div>
    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="board" style="display:grid;">
    <div class="cell" onclick="play(0)"></div>
    <div class="cell" onclick="play(1)"></div>
    <div class="cell" onclick="play(2)"></div>
    <div class="cell" onclick="play(3)"></div>
    <div class="cell" onclick="play(4)"></div>
    <div class="cell" onclick="play(5)"></div>
    <div class="cell" onclick="play(6)"></div>
    <div class="cell" onclick="play(7)"></div>
    <div class="cell" onclick="play(8)"></div>
  </div>

  <div id="status"></div>
  <button id="resetBtn" onclick="reset()">Reset</button>

  <script>
    var cells = ["", "", "", "", "", "", "", "", ""];
    var currentPlayer = "X";
    var gameOver = false;
    var vsComputer = false;
    var gameStarted = false;
    var playerXName = "";
    var playerOName = "";
    var winningCombo = [];

    function togglePlayerOInput() {
      var mode = document.getElementById("mode").value;
      if (mode === "computer") {
        document.getElementById("playerONameContainer").style.display = "none";
      } else if (mode === "multiplayer") {
        document.getElementById("playerONameContainer").style.display = "block";
      } else {
        document.getElementById("playerONameContainer").style.display = "none";
      }
    }

    function startGame() {
      var mode = document.getElementById("mode").value;
      playerXName = document.getElementById("playerXName").value.trim();
      playerOName = document.getElementById("playerOName").value.trim();

      if (mode !== "computer" && mode !== "multiplayer") {
        alert("Please select a valid game mode.");
        return;
      }
      if (playerXName === "") {
        alert("Please enter Player X's name.");
        return;
      }
      if (mode === "multiplayer" && playerOName === "") {
        alert("Please enter Player O's name.");
        return;
      }

      vsComputer = (mode === "computer");
      currentPlayer = "X";
      gameOver = false;
      gameStarted = true;
      cells = ["", "", "", "", "", "", "", "", ""];
      winningCombo = [];

      var allCells = document.getElementsByClassName("cell");
      for (var i = 0; i < allCells.length; i++) {
        allCells[i].textContent = "";
        allCells[i].classList.remove("win-cell");
      }

      document.getElementById("setup").style.display = "none";
      document.getElementById("board").style.display = "grid";
      document.getElementById("status").textContent = playerXName + "'s turn";
      document.getElementById("resetBtn").style.display = "inline-block";
    }

    function play(index) {
      if (!gameStarted || gameOver || cells[index] !== "") return;

      cells[index] = currentPlayer;
      var allCells = document.getElementsByClassName("cell");
      allCells[index].textContent = currentPlayer;

      if (checkWin()) {
        highlightWinningCells();
        if (currentPlayer === "X") {
          document.getElementById("status").textContent = playerXName + " wins!";
        } else {
          document.getElementById("status").textContent = playerOName + " wins!";
        }
        gameOver = true;
        return;
      }

      if (cells.indexOf("") === -1) {
        document.getElementById("status").textContent = "It's a draw!";
        gameOver = true;
        return;
      }

      if (currentPlayer === "X") {
        currentPlayer = "O";
      } else {
        currentPlayer = "X";
      }

      if (vsComputer && currentPlayer === "O" && !gameOver) {
        computerMove();
      } else {
        if (currentPlayer === "X") {
          document.getElementById("status").textContent = playerXName + "'s turn";
        } else {
          document.getElementById("status").textContent = playerOName + "'s turn";
        }
      }
    }

    function computerMove() {
      if (gameOver) return;
      var emptyCells = [];
      for (var i = 0; i < cells.length; i++) {
        if (cells[i] === "") emptyCells.push(i);
      }
      if (emptyCells.length === 0) return;

      var moveIndex = emptyCells[Math.floor(Math.random() * emptyCells.length)];

      cells[moveIndex] = currentPlayer;
      var allCells = document.getElementsByClassName("cell");
      allCells[moveIndex].textContent = currentPlayer;

      if (checkWin()) {
        highlightWinningCells();
        document.getElementById("status").textContent = playerOName + " wins!";
        gameOver = true;
        return;
      }

      if (cells.indexOf("") === -1) {
        document.getElementById("status").textContent = "It's a draw!";
        gameOver = true;
        return;
      }

      currentPlayer = "X";
      document.getElementById("status").textContent = playerXName + "'s turn";
    }

    function checkWin() {
      var wins = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];

      for (var i = 0; i < wins.length; i++) {
        var a = wins[i][0];
        var b = wins[i][1];
        var c = wins[i][2];
        if (cells[a] !== "" && cells[a] === cells[b] && cells[b] === cells[c]) {
          winningCombo = [a,b,c];
          return true;
        }
      }
      winningCombo = [];
      return false;
    }

    function highlightWinningCells() {
      var allCells = document.getElementsByClassName("cell");
      for (var i = 0; i < winningCombo.length; i++) {
        allCells[winningCombo[i]].classList.add("win-cell");
      }
    }

    function reset() {
      gameStarted = false;
      currentPlayer = "X";
      gameOver = false;
      cells = ["", "", "", "", "", "", "", "", ""];
      winningCombo = [];

      var allCells = document.getElementsByClassName("cell");
      for (var i = 0; i < allCells.length; i++) {
        allCells[i].textContent = "";
        allCells[i].classList.remove("win-cell");
      }

      document.getElementById("status").textContent = "";
      document.getElementById("board").style.display = "none";
      document.getElementById("setup").style.display = "block";
      document.getElementById("resetBtn").style.display = "none";

      document.getElementById("mode").value = "";
      document.getElementById("playerXName").value = "";
      document.getElementById("playerOName").value = "";
      togglePlayerOInput();
    }
  </script>
</body>
</html>
